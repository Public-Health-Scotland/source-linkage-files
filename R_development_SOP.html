<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>R SLF Development SOP • createslf</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R SLF Development SOP"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">createslf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Public-Health-Scotland/source-linkage-files/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>R SLF Development SOP</h1>
      <small class="dont-index">Source: <a href="https://github.com/Public-Health-Scotland/source-linkage-files/blob/HEAD/R_development_SOP.md" class="external-link"><code>R_development_SOP.md</code></a></small>
    </div>

<div id="r-slf-development-sop" class="section level1">
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a></h2>
<p>This SOP aims to provide background to and a framework for contributing to the SLF (Source Linkage Files) R project.</p>
</div>
<div class="section level2">
<h2 id="issues">Issues<a class="anchor" aria-label="anchor" href="#issues"></a></h2>
<p>Any piece of work required will be logged as <a href="https://github.com/Public-Health-Scotland/source-linkage-files/issues" class="external-link">an issue on GitHub</a>. This allows each piece of work to be assigned to an individual to work on. It provides a well-organised workflow for the team to work collaboratively.</p>
</div>
<div class="section level2">
<h2 id="branching">Branching<a class="anchor" aria-label="anchor" href="#branching"></a></h2>
<p>Generally speaking, we use the <a href="https://docs.github.com/en/get-started/quickstart/github-flow" class="external-link">GitHub Flow model</a> for R development, with the <a href="https://github.com/Public-Health-Scotland/source-linkage-files/tree/main-R" class="external-link">main-R branch</a> being the base branch. The <code>master</code> branch is left untouched with changes merged onto the <code>main-R</code> branch.</p>
<div class="section level3">
<h3 id="create-a-new-branch">Create a new branch<a class="anchor" aria-label="anchor" href="#create-a-new-branch"></a></h3>
<p>To work on a new issue, you will need to create a new branch. This is best done for even small changes such as renaming scripts/functions. To do this, make sure your <code>main-R</code> is the most up-to-date version.</p>
<p>This can be done using the RStudio buttons:</p>
<ul><li><p>switch branch (checkout) <code>main-R</code> and pull,</p></li>
<li><p>click the new branch button to the left of the current branch name to create your new branch,</p></li>
<li><p>name your new branch something meaningful and descriptive.</p></li>
</ul><p>Or, equally in the terminal:</p>
<pre><code>git checkout main-R
git pull
git checkout -b &lt;new_branch_name&gt;</code></pre>
<p>Once you have completed this, you can start to use your new branch.</p>
<p>Your branch is a safe place to make changes. If you make a mistake, you can revert your changes or push additional changes to fix the mistake. Your changes will not end up on the default branch until you merge your branch. There should be one person in charge/making changes in each branch.</p>
</div>
</div>
<div class="section level2">
<h2 id="commits">Commits<a class="anchor" aria-label="anchor" href="#commits"></a></h2>
<p>Commits contain the changes you have carried out in your script. You can do this as little or often as you want. Ideally, each commit should contain an isolated, complete change. This makes it easy to revert your changes if needed. A good working practice can be committing after completion of your script, or at end of the day working, then after any requested changes to your script.</p>
<p>To commit your changes, use the commit button in the Git pane in RStudio, give each commit a descriptive message to help you and future contributors understand what changes the commit contains. See <a href="https://reflectoring.io/meaningful-commit-messages/" class="external-link">writing meaningfull commit messages</a> for some in-depth advice.</p>
<p>Once you have committed your changes, push this to your branch using the push button or <code>git push</code> in the terminal.</p>
<div class="section level3">
<h3 id="pushing-commits-back-to-github">Pushing commits back to GitHub<a class="anchor" aria-label="anchor" href="#pushing-commits-back-to-github"></a></h3>
<p>Before each commit, but absolutely before you push, you should make sure your code is documented, tested, checked and styled.</p>
<ul><li>
<strong>Document</strong>: <code>Ctrl + Shift + D</code>, the ‘Document’ button under ‘More’ in the build pane, or running <code>devtools::document</code> will invoke <a href="https://roxygen2.r-lib.org/articles/roxygen2.html" class="external-link"><code>{roxygen2}</code></a> to build the documentation for your functions. Note that we have a GitHub action set-up which should automatically perform this step if it’s missed.</li>
<li>
<strong>Test</strong>: <code>Ctrl + Alt + F7</code>, the ‘Test Package’ button under ‘More’ in the build pane, or running <code>devtools::test</code> will invoke <a href="https://testthat.r-lib.org/" class="external-link"><code>{testthat}</code></a> to run any new or existing tests which have been written. Writing tests and then checking that they are still working ensures that our functions do what they are supposed to, and will highlight when any changes we make inadvertantly break existing behaviour.</li>
<li>
<strong>Check</strong>: <code>Ctrl + Shift + E</code>, the ‘Check’ button in the build pane, or running <code>devtools::check</code>. This can take a couple of minutes as it peforms lots of checks, including the above steps of <em>document</em> and <em>test</em>. For some information on the steps performed see the <a href="https://r-pkgs.org/r-cmd-check.html" class="external-link">Automated checking</a> chapter in the R for Packages book.</li>
<li>
<strong>Style</strong>: Use the <a href="https://styler.r-lib.org/" class="external-link"><code>{styler}</code></a> to style any files you’ve created or modified, this ensures that the codebase has a consistent style. Note that we have a GitHub action set-up which should automatically perform this step if it’s missed.</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="pull-requests">Pull Requests<a class="anchor" aria-label="anchor" href="#pull-requests"></a></h2>
<p>A pull request is how your branch is merged onto <code>main-R</code> but not before thorough checks and feedback.</p>
<p>To create a pull request this is done in GitHub under the Pull Request section of your team’s repository. On this tab, click ‘new pull request’. You will then need to enter which branch is being merged into which. Make sure to change the <code>base</code> to <code>main-R</code> not <code>master</code>. Then under <code>compare</code> select your current branch. Then give the pull request a meaningful name and description including any information that may help your team understand/work the script. Include any link to the issue the pull request is closing by entering <code>Closes #&lt;issuenumber&gt;</code>.</p>
<p>More in-depth information on pull requests can be found <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request" class="external-link">here</a>.</p>
<p>Other options can be entered to help categorise the pull request, such as labels and projects. Please enter these to keep the repo in good working order. Also, you will need to select who the reviewer/s may be. The best way is to select your team name under ‘Reviewers’, this will then randomly select members of your team who have fewer requests to review. You can also manually @mention or request a review from specific people if required for double-checking or assistance.</p>
</div>
<div class="section level2">
<h2 id="review-process">Review Process<a class="anchor" aria-label="anchor" href="#review-process"></a></h2>
<p>The reviewer/s should leave questions, comments, and suggestions. They can comment on the whole pull request or add comments to specific lines. This includes suggesting edits to the code.</p>
<p>Once the review has been completed, you can go look at the comments and suggestions left. Your pull request will not be able to be merged until all changes are complete. If there are suggestions to the code left these can be committed in GitHub by selecting ‘commit suggestion’, make sure to pull the updated branch in <code>R</code> and test that the suggestions do not break any code.</p>
<p>You can continue to commit and push changes in response to the review and your pull request will update automatically.</p>
<div class="section level3">
<h3 id="reviewing">Reviewing<a class="anchor" aria-label="anchor" href="#reviewing"></a></h3>
<p>Reviewing another branch is conducted in GitHub. You will be notified if you have been asked to review.</p>
<p>To review:</p>
<ul><li><p>on <code>R</code>, switch to review branch,</p></li>
<li><p>run the code contained on the scripts, make sure to check all scripts on the branch as some may require new functions to be run for the code to work, this should be outlined in the description of the pull request,</p></li>
<li><p>check everything is working as expected,</p></li>
<li><p>head back to GitHub on the pull request, there is the ‘files changed’ tab which outlines the scripts included in the branch. This tab then allows you to add comments/suggestions through <code>+</code> by clicking on specific lines of code, this can be dragged to include a large chunk of code. If you are just leaving a comment this can be entered in the box that pops up after the <code>+</code> is clicked. To make a suggestion on the code, click on the <code>±</code> ‘add a suggestion’ button, which allows you to write code to be used instead.</p></li>
</ul></div>
<div class="section level3">
<h3 id="merging">Merging<a class="anchor" aria-label="anchor" href="#merging"></a></h3>
<p>Once your pull request is approved, with no outstanding comments/suggestions, GitHub will allow you to merge your pull request. This will automatically merge your branch so that your changes will now appear in <code>main-R</code>.</p>
<p>This may result in some merge conflicts which will need to be resolved before merging. The best practice for this is to keep your branch up-to-date with <code>main-R</code> throughout your editing process. This can be done by using <code>git rebase</code>.</p>
<p>After your pull request has been approved, delete your branch. This indicates that the work on the branch is complete and prevents you or others from accidentally using old branches. This may be done automatically by GitHub.</p>
</div>
<div class="section level3">
<h3 id="git">Git<a class="anchor" aria-label="anchor" href="#git"></a></h3>
<p>Most of the work carried out can be done solely on <code>R</code> and GitHub but underlying all this is Git. Git commands can be used in the Terminal or using the buttons to push and pull to your branch.</p>
<p>A cheat sheet can be found <a href="https://training.github.com/downloads/github-git-cheat-sheet.pdf" class="external-link">here</a> which can help you if you need to use any of these.</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Public Health Scotland, Jennifer Thom, James McMahon, Catherine Holland.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

    </footer></div>

  

  

  </body></html>

